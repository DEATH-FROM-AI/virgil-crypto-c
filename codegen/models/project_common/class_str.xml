<class name="str" context="public" lifecycle="none" is_value_type="1">
    Encapsulates readonly array of characters, aka string view.

    <require header="ctype.h" is_system="1"/>


    <property name="chars" type="char" access="readonly">
        Underlying characters array.

        <array length="given"/>
    </property>


    <property name="len" type="size">
        Characters array length.
    </property>


    <constructor name="str">
        Create string.

        <argument name="str" type="char">
            <string length="given"/>
        </argument>

        <argument name="len" type="size"/>
    </constructor>


    <constructor name="from str">
        Create string from null-terminated string.

        <argument name="str" type="char">
            <string length="null_terminated"/>
        </argument>
    </constructor>


    <constructor name="from data">
        Create string from data.

        <argument name="data" class="data"/>
    </constructor>


    <constructor name="empty">
        Create an empty string.
    </constructor>


    <method name="is valid">
        Returns true if underlying string is defined.

        <return type="boolean"/>
    </method>


    <method name="is empty">
        Returns true if underlying string is empty.

        <return type="boolean"/>
    </method>


    <method name="is valid and non empty">
        Returns true if underlying string is defined and not empty.

        <return type="boolean"/>
    </method>


    <method name="is null terminated">
        Returns true if underlying string is null-terminated.

        <return type="boolean"/>
    </method>


    <method name="equal">
        Return true if given string is equal.

        <argument name="rhs" class="self"/>

        <return type="boolean"/>
    </method>


    <method name="icase equal">
        Return true if given string is equal (case-insensitive).

        <argument name="rhs" class="self"/>

        <return type="boolean"/>
    </method>


    <method name="secure equal">
        Perform constant-time string comparison.
        The time depends on the given length but not on the string itself.
        Return true if given string is equal.

        <argument name="rhs" class="self"/>

        <return type="boolean"/>
    </method>


    <method name="len">
        Return string length.

        Note, this method can be used for wrappers where direct access
        to the structure fields is prohibited.

        <return type="size"/>
    </method>


    <method name="chars" is_const="1">
        Returns underlying string characters.

        Note, this method can be used for wrappers where direct access
        to the structure fields is prohibited.

        <return type="char" is_reference="1"/>
    </method>


    <method name="as data" is_const="1">
        Returns underlying characters array as bytes object.

        <return class="data" is_reference="0" access="readwrite"/>
    </method>


    <method name="slice beg" >
        Return underlying string slice starting from beginning.

        <argument name="offset" type="size"/>
        <argument name="len" type="size"/>

        <return class="self" is_reference="0"/>
    </method>


    <method name="slice end">
        Return underlying string slice starting from ending.

        <argument name="offset" type="size"/>
        <argument name="len" type="size"/>

        <return class="self" is_reference="0"/>
    </method>


    <method name="trim prefix" >
        Return underlying string slice without given prefix.

        <argument name="prefix" class="self"/>

        <return class="self" is_reference="0"/>
    </method>
</class>
